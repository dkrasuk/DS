{"version":3,"sources":["../src/extensions.js"],"names":["window","$","validator","addMethod","value","element","regexp","re","RegExp","optional","test","format","mach","match","minDate","dateArray","split","d","m","y","dateStr","inputDate","Date","maxDate","mask","definitions","ui","dialog","prototype","_allowInteraction","ui_dialog_interaction","e","target","closest","length","apply","arguments","bindings","thisEval","code","object","codeText","eval","call","path","model","name","$elem","find","indexOf","date","replace","trim","func","result","custom","removeClass","addClass","String","startsWith","searchString","position","substr"],"mappings":"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","file":"extensions.js","sourcesContent":["﻿; 'use strict';\r\nif (window.$ && window.$.validator) {\r\n\r\n    $.validator.addMethod(\r\n        \"pattern\",\r\n        function (value, element, regexp) {\r\n            var re = new RegExp(regexp);\r\n            return this.optional(element) || re.test(value);\r\n        },\r\n        'Значение имеет неверный формат'\r\n    );\r\n\r\n    $.validator.addMethod(\r\n        \"dateFormat\",\r\n        function (value, element, format) {\r\n\r\n            var mach = value.match(/^(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.]((?:19|20)\\d\\d)$/);\r\n            if (!mach) { return false; } else { return true; }\r\n        },\r\n        'Пожалуйста, введите корректную дату.'\r\n    );\r\n    $.validator.addMethod(\r\n        \"minDate\",\r\n        function (value, element, minDate) {\r\n            if (!minDate) {\r\n                return true;\r\n            }\r\n            \r\n            var dateArray = value.split('/');\r\n            var d = dateArray[0];\r\n            var m = dateArray[1];\r\n            var y = dateArray[2];\r\n\r\n            var dateStr = y + '-' + m + '-' + d + 'T00:00:00';\r\n            var inputDate = new Date(dateStr);\r\n\r\n            if (inputDate >= minDate)\r\n                return true;\r\n            return false;\r\n        },\r\n        'Дата меньше допустимой'\r\n   );\r\n    $.validator.addMethod(\r\n        \"maxDate\",\r\n        function (value, element, maxDate) {\r\n            if (!maxDate) {\r\n                return true;\r\n            }\r\n\r\n            var dateArray = value.split('/');\r\n            var d = dateArray[0];\r\n            var m = dateArray[1];\r\n            var y = dateArray[2];\r\n\r\n            var dateStr = y + '-' + m + '-' + d + 'T00:00:00';\r\n            var inputDate = new Date(dateStr);\r\n\r\n            if (inputDate <= maxDate)\r\n                return true;\r\n            return false;\r\n        },\r\n        'Дата больше допустимой'\r\n   );\r\n}\r\nif (window.$ && $.mask) {\r\n    $.mask.definitions['~'] = '[+-]';\r\n}\r\n\r\nif (window.$ && $.ui && $.ui.dialog && $.ui.dialog.prototype._allowInteraction) {\r\n    var ui_dialog_interaction = $.ui.dialog.prototype._allowInteraction;\r\n    $.ui.dialog.prototype._allowInteraction = function (e) {\r\n        if ($(e.target).closest('.select2-dropdown').length) return true;\r\n        return ui_dialog_interaction.apply(this, arguments);\r\n    };\r\n}\r\n\r\nif (window.$ && $.bindings) {\r\n    $.bindings.format = function (path, value, format, model, name) {\r\n        \r\n        var $elem = $(this).find('[data-model=\"' + path + '\"]');\r\n        if (format) {\r\n            if (format.indexOf('date:') === 0) {\r\n                if (value) {\r\n                    return $.format.date(value, format.replace('date:', '').trim());\r\n                } else {\r\n                    return null;\r\n                }\r\n            }\r\n            if (format.indexOf('func:') === 0) {\r\n                var func = thisEval('this.' + format.replace('func:', '').trim(), model);\r\n                var result = func.call(model, value, $elem);\r\n                return result;\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n\r\n    $.bindings.custom = function (path, value, custom, model, name) {\r\n        if (custom === 'show' && value) {\r\n            $(this).removeClass('hidden');\r\n            return;\r\n        }\r\n        if (custom === 'hide' && value) {\r\n            $(this).addClass('hidden');\r\n            return;\r\n        }\r\n        return;\r\n    };\r\n\r\n    function thisEval(code, object) {\r\n        return function (codeText) { return eval(codeText); }.call(object, code);\r\n    }\r\n}\r\n\r\nif (!String.prototype.startsWith) {\r\n    String.prototype.startsWith = function (searchString, position) {\r\n        return this.substr(position || 0, searchString.length) === searchString;\r\n    };\r\n}"]}