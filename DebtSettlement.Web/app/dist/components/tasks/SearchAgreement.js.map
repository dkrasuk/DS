{"version":3,"sources":["../../../src/components/tasks/SearchAgreement.js"],"names":["$","on","height","keypress","e","which","preventDefault","click","getSearchUrl","app","utils","urlContent","val","removeClass","fn","DataTable","isDataTable","ajax","url","load","dataTable","columns","data","name","title","dataSrc","language","initComplete","table","row","change","modal"],"mappings":"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","file":"SearchAgreement.js","sourcesContent":["﻿$(function () {\r\n    $(\"#agreementSearchTable\").on(\"draw.dt\", function () {\r\n        $(\"#tablePanel\").height($(\"#agreementSearchTable > tbody\").height() + 150);\r\n        $(\"#agreementSearchTable\").height($(\"#agreementSearchTable > tbody\").height() + 60);\r\n    });\r\n\r\n    $(\"#searchAgreementBox\").keypress(function (e) {\r\n        if (e.which === 13) {\r\n            e.preventDefault();\r\n            $(\"#btnStartSearch\").click();\r\n        }\r\n    });\r\n\r\n    function getSearchUrl() {\r\n        return app.utils.urlContent(\"/api/agreements/search?searchTerm=\" + $(\"#searchAgreementBox\").val());\r\n    };\r\n\r\n    $(\"#btnStartSearch\").click(function () {\r\n\r\n        $(\"#tablePanel\").removeClass(\"hidden\");\r\n\r\n        if ($.fn.DataTable.isDataTable(\"#agreementSearchTable\")) {\r\n            $(\"#agreementSearchTable\").DataTable().ajax.url(getSearchUrl()).load();\r\n            return;\r\n        }\r\n\r\n        $(\"#agreementSearchTable\").dataTable({\r\n            columns: [\r\n                { data: \"AgreementId\", name: \"AgreementId\", title: \"Id\" },\r\n                { data: \"AgreementNumber\", name: \"AgreementNumber\", title: \"Номер\" },\r\n                { data: \"LastName\", name: \"LastName\", title: \"Фамилия\" },\r\n                { data: \"FirstName\", name: \"FirstName\", title: \"Имя\" },\r\n                { data: \"Patronymic\", name: \"Patronymic\", title: \"Отчество\" },\r\n                { data: \"ProductCode\", name: \"ProductCode\", title: \"Код продукта\" },\r\n                { data: \"Inn\", name: \"Inn\", title: \"ИНН\" },\r\n                { data: \"Dpd\", name: \"Dpd\", title: \"Дней просрочки\" },\r\n                { data: \"Outstanding\", name: \"Outstanding\", title: \"Сумма просрочки\" },\r\n                { data: \"Currency\", name: \"Currency\", title: \"Валюта\" }\r\n            ],\r\n            \"ajax\": {\r\n                \"url\": app.utils.urlContent(\"/api/agreements/search?searchTerm=\" + $(\"#searchAgreementBox\").val()),\r\n                dataSrc: \"\"\r\n            },\r\n            language: {\r\n                \"processing\": \"Loading ...\",\r\n                \"search\": \"Поиск:\",\r\n                \"lengthMenu\": \"Показать _MENU_ записей\",\r\n                \"info\": \"Записи с _START_ до _END_ из _TOTAL_ записей\",\r\n                \"infoEmpty\": \"Записи с 0 до 0 из 0 записей\",\r\n                \"infoFiltered\": \"(отфильтровано из _MAX_ записей)\",\r\n                \"infoPostFix\": \"\",\r\n                \"loadingRecords\": \"Загрузка записей...\",\r\n                \"zeroRecords\": \"Записи отсутствуют.\",\r\n                \"emptyTable\": \"В таблице отсутствуют данные\",\r\n                \"paginate\": {\r\n                    \"first\": \"Первая\",\r\n                    \"previous\": \"Предыдущая\",\r\n                    \"next\": \"Следующая\",\r\n                    \"last\": \"Последняя\"\r\n                },\r\n                \"aria\": {\r\n                    \"sortAscending\": \": активировать для сортировки столбца по возрастанию\",\r\n                    \"sortDescending\": \": активировать для сортировки столбца по убыванию\"\r\n                }\r\n            },\r\n            initComplete: function() {\r\n                \r\n                $(\"#agreementSearchTable tbody\").on(\"click\", \"tr\", function () {\r\n                    var table = $(\"#agreementSearchTable\").DataTable();\r\n\r\n                    var data = table.row($(this)).data();\r\n\r\n                    $(\"#AgreementId\").val(data[\"AgreementId\"]).change();\r\n\r\n                    $(\"#modalSearchAgreement\").modal(\"toggle\");\r\n                });\r\n\r\n            },\r\n            \"bDestroy\": true\r\n        });\r\n\r\n    });\r\n});"]}