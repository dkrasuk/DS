{"version":3,"sources":["../../../src/components/tasks/index.js"],"names":["app","components","tasks","controllers","ListController","global","$","utils","dataBinder","list","tasksService","htmlHelpers","helpers","vm","defaultDateFotmat","baseApiUrl","gridSelector","gridFilter","mainGrid","$table","tasksActions","view","id","dialog","ui","url","urlContent","close","refreshTasksGrid","width","height","title","find","data","duplicate","confirm","text","func","loader","duplicateTask","then","success","showDefaultError","showHistory","taskId","closeTask","form","error","tableHelpers","renderActionsMenu","value","display","content","ID","getForm","bindDropdownDropup","on","$this","$listHolder","parent","placement","placementHeight","whereThisEnd","innerHeight","position","top","addClass","removeClass","append","css","left","offset","detach","scroll","dropdown","bindTableActions","event","preventDefault","template","getAvailableCommands","ctrl","WorkflowCommandsPanelController","init","notify","bindTableSearch","input","keyup","e","keyCode","fnFilter","html","prepend","val","tableWrapper","parentsUntil","oldSearch","attr","after","prependTo","window","addEventListener","bind","tooltip","selector","document","location","href","indexOf","filter","hash","split","setTasksGridFilter","processGridFilter","gridParameters","fnServerOData","pagingType","language","order","columnDefs","columns","mData","name","render","type","replace","result","length","str","substr","searchable","parseDate","htmlEncode","Comment","generateLabelClassByStatus","dataTable","processFilterHash","Date","toISOString","date","format","filterObject","fnSettings","sAjaxSource","fnDraw","loadTasks","jQuery","services"],"mappings":"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","file":"index.js","sourcesContent":["﻿; var app = app || {};\r\napp.components = app.components || {};\r\napp.components.tasks = app.components.tasks || {};\r\napp.components.tasks.controllers = app.components.tasks.controllers || {};\r\napp.components.tasks.controllers.ListController = app.components.tasks.controllers.ListController ||\r\n    function (global, $, app, utils, dataBinder) {\r\n\r\n    };\r\n\r\napp.components.tasks.list = (function (global, $, app, utils, dataBinder, tasksService) {\r\n    'use strict';\r\n\r\n    var htmlHelpers = app.components.tasks.helpers.htmlHelpers;\r\n    var vm = {};\r\n    var defaultDateFotmat = 'dd.MM.yyyy';\r\n    var baseApiUrl = '/api/tasks/';\r\n    var gridSelector = '#table-tasks';\r\n    var gridFilter;\r\n    var mainGrid;\r\n    var $table;\r\n\r\n    var tasksActions = {\r\n        view: function (id) {\r\n            var dialog = utils.ui.dialog({\r\n                url: utils.urlContent('/task/item?id=' + id + '&isPartial=true'),\r\n                close: function () {\r\n                    refreshTasksGrid();\r\n                },\r\n                width: 1200,\r\n                height: 600,\r\n                title: 'Просмотр задачи'\r\n            });\r\n            dialog.find('.modal-body').data('task-id', id);\r\n        },\r\n        duplicate: function (id) {\r\n            utils.ui.confirm({\r\n                text: 'Вы уверены что хотите продублировать задачу?',\r\n                func: function () {\r\n                    utils.ui.loader($table);\r\n                    tasksService.duplicateTask(id).then(\r\n                        function () {\r\n                            utils.ui.loader($table, false);\r\n                            utils.ui.success({\r\n                                text: 'Задача успешно продублирована.'\r\n                            });\r\n                            refreshTasksGrid();\r\n                        },\r\n                        function () {\r\n                            showDefaultError($table);\r\n                        }\r\n                    );\r\n                }\r\n            });\r\n        },\r\n        showHistory: function (taskId) {\r\n            var dialog = utils.ui.dialog({\r\n                url: utils.urlContent('/task/history?id=' + taskId + '&isPartial=true'),\r\n                width: 1100,\r\n                height: 550,\r\n                id: 'viewTaskHistoryDialog',\r\n                title: 'История задачи'\r\n            });\r\n            dialog.find('.modal-body').data('task-id', taskId);\r\n        },\r\n\r\n        close: function (id) {\r\n            utils.ui.confirm({\r\n                text: 'Вы уверены что хотите закырть задачу?',\r\n                func: function () {\r\n                    utils.ui.loader($table);\r\n                    tasksService.closeTask(id).then(\r\n                        function () {\r\n                            utils.ui.loader($table, false);\r\n                            utils.ui.success({ text: 'Задача успешно закрыта' });\r\n                            refreshTasksGrid();\r\n                        },\r\n                        function () {\r\n                            showDefaultError($table);\r\n                        }\r\n                    );\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    function showDefaultError(form) {\r\n        utils.ui.loader(form, false);\r\n        utils.ui.error({\r\n            text: 'Что-то пошло не так. Случилась ошибка при отправке запроса'\r\n        });\r\n    }\r\n\r\n    var tableHelpers = {\r\n        renderActionsMenu: function (value, display, data) {\r\n            var content = '<div class=\"dropdown\" data-placement-range=\".dataTables_scrollBody\">\\\r\n                      <a class=\"color-blue btn btn-d-v btn-circle dots-vertical dropdown-toggle\"\\\r\n                           \\\r\n                            data-action-menu\\\r\n                            data-task-id=\"' + data.ID + '\"\\\r\n                            type=\"button\"\\\r\n                            data-toggle=\"dropdown\"></a>';\r\n\r\n            content += '<ul class=\"dropdown-menu\">\\\r\n                              <li><a href=\"#\" data-view-task=\"\" data-task-id=\"' + data.ID + '\">\\\r\n                                      <span class=\"glyphicon glyphicon-search\"></span> Просмотреть</a></li>\\\r\n                              <li><a href=\"#\" data-duplicate-task=\"\" data-task-id=\"' + data.ID + '\">\\\r\n                                      <span class=\"glyphicon glyphicon-duplicate\"></span> Копировать</a></li>\\\r\n                              <li><a href=\"#\" data-show-history=\"\" data-task-id=\"' + data.ID + '\">\\\r\n                                      <span class=\"glyphicon glyphicon-list-alt\"></span> История</a></li>\\\r\n                              <li class=\"divider\"></li>\\\r\n                              <li><div class=\"addition-dropdown-menu\">\\\r\n                                    <span class=\"glyphicon glyphicon-refresh animated rotate\"></span></div></li>\\\r\n                        </ul>';\r\n\r\n            content += '</div>';\r\n            return content;\r\n        }\r\n    }\r\n    function getForm() {\r\n        return $('[ng-conroller=\"ViewTaskListController\"]');\r\n    }\r\n\r\n    function bindDropdownDropup(form) {\r\n        form.on('show.bs.dropdown', '.dropdown', function () {\r\n            var $this = $(this);\r\n            var $listHolder = $this.find('.dropdown-menu');\r\n            $this.data('parent', $this.parent());\r\n            var placement, placementHeight, whereThisEnd;\r\n\r\n            if ((placement = $this.data(\"placement-range\"))) {\r\n                placementHeight = $(placement).innerHeight() - 10; //10 is for scrollbar. need to replace it with some logic.\r\n                whereThisEnd = $this.position().top + $this.height() + $listHolder.height() + 50;\r\n\r\n                if (whereThisEnd > placementHeight)\r\n                    $this.addClass(\"dropup\");\r\n                else\r\n                    $this.removeClass(\"dropup\");\r\n            }\r\n\r\n            form.append($this.css({\r\n                position: 'absolute',\r\n                left: 10,\r\n                top: $this.offset().top\r\n            }).detach());\r\n            $listHolder.data(\"open\", true);\r\n        });\r\n        form.on('hidden.bs.dropdown', '.dropdown', function () {\r\n            var $this = $(this);\r\n            var $listHolder = $this.find(\".dropdown-menu\");\r\n            $listHolder.data(\"open\", false);\r\n\r\n            $this.data('parent').append($this.css({\r\n                position: 'inherit', left: false, top: false\r\n            }).detach());\r\n        });\r\n        form.find('.dataTables_scrollBody').scroll(function () {\r\n            form.find('.dropdown.open .dropdown-toggle').dropdown('toggle');\r\n        });\r\n    }\r\n\r\n    function bindTableActions() {\r\n        var form = getForm();\r\n        form.on('click', '[data-action-menu]', function (event) {\r\n            event.preventDefault();\r\n            var $this = $(this);\r\n            var template = $this.parent().find('.addition-dropdown-menu');\r\n\r\n            tasksService.getAvailableCommands($this.data('task-id')).then(\r\n                function (data) {\r\n                    var ctrl = new app.components.tasks.controllers.WorkflowCommandsPanelController(\r\n                        template, data, $, utils, tasksService\r\n                    );\r\n                    ctrl.on('submit', function () { refreshTasksGrid(); });\r\n                    ctrl.init();\r\n                },\r\n                function () {\r\n                    utils.ui.notify('Ошибка!', 'Не получилось загрузить список действий :(', 'error');\r\n                });\r\n        });\r\n\r\n        form.on('click', 'a[data-view-task]', function (event) {\r\n            event.preventDefault();\r\n            tasksActions.view($(this).data('task-id'));\r\n        });\r\n        form.on('click', 'a[data-duplicate-task]', function (event) {\r\n            event.preventDefault();\r\n            tasksActions.duplicate($(this).data('task-id'));\r\n        });\r\n        form.on('click', 'a[data-show-history]', function (event) {\r\n            event.preventDefault();\r\n            tasksActions.showHistory($(this).data('task-id'));\r\n        });\r\n\r\n        bindDropdownDropup(form);\r\n        bindTableSearch();\r\n\r\n    }\r\n\r\n    function bindTableSearch() {\r\n        var input = $('<input type=\"text\" />').keyup(function (e) {\r\n            if (e.keyCode === 13) {\r\n                mainGrid.fnFilter(this.value);\r\n\r\n                //.columns( 3 )\r\n                //.search( this.value )\r\n                //.draw();\r\n            }\r\n        });\r\n        var html = $('<div class=\"input-append\" style=\"display: inline-block\">\\\r\n                        <button class=\"btn btn-default\" type=\"button\">\\\r\n                            <span class=\"glyphicon glyphicon-search\"></span>\\\r\n                        </button>\\\r\n                    </div>');\r\n        html.prepend(input);\r\n        html.find('button').on('click', function () {\r\n            mainGrid.fnFilter(input.val());\r\n        });\r\n\r\n        var tableWrapper = $table.parentsUntil('.dataTables_wrapper').parent();\r\n        var oldSearch = tableWrapper.find('div.dataTables_filter input');\r\n        input.addClass(oldSearch.attr('class'));\r\n        oldSearch.css('display', 'none').after(html);\r\n        $('<button class=\"btn btn-default btn-sm refresh-task-table-btn\" title=\"Refresh\" >\\\r\n                <span class=\"glyphicon glyphicon-refresh\"></span>\\\r\n           </button>')\r\n            .on('click', function () { refreshTasksGrid(); })\r\n            .prependTo(tableWrapper.find('.dataTables_length'));\r\n    }\r\n\r\n    function init() {\r\n        window.addEventListener('message', function (event) {\r\n            if (event.data && event.data.event === 'taskCreated') {\r\n                refreshTasksGrid();\r\n            }\r\n        });\r\n\r\n        var form = getForm();\r\n        dataBinder.bind(form, vm);\r\n\r\n        form.tooltip({\r\n            selector: '[data-toggle=\"tooltip\"]'\r\n        });\r\n\r\n        if (global.document.location.href.indexOf('#') !== -1) {\r\n            var filter = { hash: global.document.location.href.split('#')[1] };\r\n            setTasksGridFilter(filter);\r\n            processGridFilter(filter);\r\n        }\r\n\r\n        $table = $(gridSelector);\r\n        //$table.on('init.dt', function () { bindTableActions(); });\r\n        //mainGrid = $table.DataTable({\r\n        //    \"scrollX\": true,\r\n        //    \"scrollY\": \"440px\",\r\n        //    \"processing\": true,\r\n        //    //\"serverSide\": true,\r\n        //    ajax: {\r\n        //        url: utils.urlContent(baseApiUrl),\r\n        //        dataSrc: '',\r\n        //        complete: function () {\r\n        //            utils.ui.loader('#table-tasks', false);\r\n        //        },\r\n        //        beforeSend: function () {\r\n        //            utils.ui.loader('#table-tasks');\r\n        //        }\r\n        //    },\r\n        //    select: true,\r\n        //    init: function () { alert(); },\r\n        //    columns: [\r\n        //        {\r\n        //            title: '',\r\n        //            name: 'ID',\r\n        //            data: 'ID',\r\n        //            render: tableHelpers.renderActionsMenu\r\n        //        }, //{\r\n        //        //    title: 'Id',\r\n        //        //    name: 'ID',\r\n        //        //    data: 'ID',\r\n        //        //    render: function (value, display, data) {\r\n        //        //        return '<a data-view-task=\"' + data.ID + '\" href=\"' + utils.urlContent('/task/view/' + value) + '\">' + value + '</>';\r\n        //        //    }\r\n        //        //},\r\n        //        {\r\n        //            title: 'Краткое название',\r\n        //            name: 'Title',\r\n        //            data: 'Title',\r\n        //            render: function (value, display, data) {\r\n        //                if (value) {\r\n        //                    value = value.replace(/\"/g, '');\r\n        //                    var str = value.length > 30 ? value.substr(0, 30) + '...' : value;\r\n        //                    return '<a data-view-task=\"\" data-task-id=\"' + data.ID\r\n        //                        + '\" href=\"' + utils.urlContent('/task/view/' + data.ID)\r\n        //                        + '\" title=\"' + value + '\">' + str + '</>';\r\n        //                }\r\n        //                return '';\r\n        //            }\r\n        //        },\r\n        //        { title: 'Исполнитель', name: 'Responsible', data: \"Responsible\" },\r\n        //        { title: 'Постановщик', name: 'Initiator', data: 'Initiator' },\r\n        //        {\r\n        //            title: 'Дата создания',\r\n        //            name: 'CreateDate',\r\n        //            data: 'CreateDate',\r\n        //            type: 'datetime',\r\n        //            render: parseDate\r\n        //        }, {\r\n        //            title: 'Дата исполнения',\r\n        //            name: 'PlannedDate',\r\n        //            data: 'PlannedDate',\r\n        //            type: 'datetime',\r\n        //            render: parseDate\r\n        //        }, {\r\n        //            title: 'Описание задачи',\r\n        //            name: 'Description',\r\n        //            data: 'Description',\r\n        //            render: function (value, display, data) {\r\n        //                if (value) {\r\n        //                    value = value.replace(/\"/g, '');\r\n        //                    return '<span title=\"' + value + '\">'\r\n        //                                + (value.length > 30 ? value.substr(0, 30) + '...' : value)\r\n        //                         + '</span>';\r\n        //                }\r\n        //                return '';\r\n        //            }\r\n        //        },\r\n        //        {\r\n        //            title: 'Статус',\r\n        //            name: 'Status',\r\n        //            data: 'Status',\r\n        //            render: function (data) {\r\n        //                return '<span class=\"' + htmlHelpers.generateLabelClassByStatus(data) + '\">' + data + '</span>';\r\n        //            }\r\n        //        },\r\n        //        { title: 'Тип', name: 'TaskType', data: 'TaskType' },\r\n        //    ],\r\n        //    order: [[3, 'desc']]\r\n        //});\r\n\r\n\r\n        $table.on('init.dt', function () { bindTableActions(); });\r\n        $table.on('preXhr.dt', function () { utils.ui.loader(form); });\r\n        $table.on('xhr.dt', function () {\r\n            utils.ui.loader(form, false);\r\n        });\r\n        $table.on('xhrError.dt', function () {\r\n            utils.ui.notify('Ошибочка!', ' Не удалось загрузить данные :(', 'error');\r\n            utils.ui.loader(form, false);\r\n        });\r\n        var gridParameters = {\r\n            \"scrollX\": true,\r\n            \"scrollY\": \"440px\",\r\n            \"fnServerData\": fnServerOData,\r\n            //\"iODataVersion\": 4,\r\n            \"bUseODataViaJSONP\": false,\r\n            \"sPaginationType\": \"full_numbers\",\r\n            //\"aLengthMenu\": [[2, 5, 10, -1], [\"Two\", \"Five\", \"Ten\", \"All\"]],\r\n\r\n            \"bProcessing\": true,\r\n            \"bServerSide\": true,\r\n\r\n            \"sAjaxSource\": utils.urlContent(baseApiUrl),\r\n\r\n            \"iODataVersion\": 3,\r\n            pagingType: 'simple',//'simple_numbers',\r\n            \"processing\": false,\r\n            language: {\r\n                \"processing\": \"\",\r\n                \"search\": \"Поиск:\",\r\n                \"lengthMenu\": \"Показать _MENU_ записей\",\r\n                \"info\": '',//\"Записи с _START_ до _END_ из _TOTAL_ записей\",\r\n                \"infoEmpty\": \"Записи с 0 до 0 из 0 записей\",\r\n                \"infoFiltered\": \"(отфильтровано из _MAX_ записей)\",\r\n                \"infoPostFix\": \"\",\r\n                \"loadingRecords\": \"Загрузка записей...\",\r\n                \"zeroRecords\": \"Записи отсутствуют.\",\r\n                \"emptyTable\": \"В таблице отсутствуют данные\",\r\n                \"paginate\": {\r\n                    \"first\": \"Первая\",\r\n                    \"previous\": \"Предыдущая\",\r\n                    \"next\": \"Следующая\",\r\n                    \"last\": \"Последняя\"\r\n                },\r\n                \"aria\": {\r\n                    \"sortAscending\": \": активировать для сортировки столбца по возрастанию\",\r\n                    \"sortDescending\": \": активировать для сортировки столбца по убыванию\"\r\n                }\r\n            },\r\n            //oInit: { iODataVersion : 3},\r\n            //ajax: {\r\n            //    url: utils.urlContent(baseApiUrl),\r\n            //    dataSrc: '',\r\n            //    complete: function () {\r\n            //        utils.ui.loader('#table-tasks', false);\r\n            //    },\r\n            //    beforeSend: function () {\r\n            //        utils.ui.loader('#table-tasks');\r\n            //    }\r\n            //},\r\n            order: [[5, 'desc']],\r\n            columnDefs: [\r\n                {\r\n                    \"targets\": [1],\r\n                    \"visible\": false\r\n                }\r\n            ],\r\n            columns: [{\r\n                mData: 'ID',\r\n                title: '',\r\n                name: 'ID',\r\n                data: 'ID',\r\n                \"searchable\": false,\r\n                render: tableHelpers.renderActionsMenu\r\n            }, {\r\n                title: 'Comment', name: 'Comment', data: 'Comment', \"visible\": false\r\n            }, //{\r\n                //    title: 'Id',\r\n                //    name: 'ID',\r\n                //    data: 'ID',\r\n                //    render: function (value, display, data) {\r\n                //        return '<a data-view-task=\"' + data.ID + '\" href=\"' + utils.urlContent('/task/view/' + value) + '\">' + value + '</>';\r\n                //    }\r\n                //},\r\n                {\r\n                    title: 'Краткое название',\r\n                    name: 'Title',\r\n                    data: 'Title',\r\n                    type: 'string',\r\n                    render: function (value, display, data) {\r\n                        if (value) {\r\n                            value = value.replace(/\"/g, '');\r\n                            var result = '<a data-view-task=\"\" data-task-id=\"' + data.ID\r\n                                + '\" href=\"' + utils.urlContent('/task/item?id=' + data.ID) + '\" ';\r\n                            if (value.length > 30) {\r\n                                result += ' title=\"' + value + '\"';\r\n                            }\r\n                            var str = value.length > 30 ? value.substr(0, 30) + '...' : value;\r\n                            result += '>' + str + '</a>';\r\n                            return result;\r\n                        }\r\n                        return '';\r\n                    }\r\n                }, {\r\n                    title: 'Исполнитель', name: 'Responsible', data: 'Responsible'\r\n                }, {\r\n                    title: 'Постановщик', name: 'Initiator', data: 'Initiator'\r\n                },\r\n                {\r\n                    title: 'Дата создания',\r\n                    name: 'CreateDate',\r\n                    data: 'CreateDate',\r\n                    type: 'date',\r\n                    searchable: false,\r\n                    render: function (value) {\r\n                        return parseDate(value, 'dd.MM.yyyy HH:mm:ss');\r\n                    }\r\n                }, {\r\n                    title: 'Дата исполнения',\r\n                    name: 'PlannedDate',\r\n                    data: 'PlannedDate',\r\n                    type: 'date',\r\n                    searchable: false,\r\n                    render: function (value) {\r\n                        return parseDate(value, 'dd.MM.yyyy');\r\n                    }\r\n                }, {\r\n                    title: 'Описание задачи',\r\n                    name: 'Description',\r\n                    data: 'Description',\r\n                    type: 'string',\r\n                    render: function (value) {\r\n                        if (value) {\r\n                            value = value.replace(/\"/g, '');\r\n                            return '<span title=\"' + value + '\">'\r\n                                        + (value.length > 30 ? value.substr(0, 30) + '...' : value)\r\n                                 + '</span>';\r\n                        }\r\n                        return '';\r\n                    }\r\n                }, {\r\n                    title: 'Статус',\r\n                    name: 'Status',\r\n                    data: 'Status',\r\n                    type: 'string',\r\n                    render: function (value, display, data) {\r\n                        var title = utils.htmlEncode(data.Comment).replace(/\"/g, '\\'');\r\n                        return '<span data-toggle=\"tooltip\"\\\r\n                                        title=\"' + title + '\"\\\r\n                                        class=\"' + htmlHelpers.generateLabelClassByStatus(value) + '\">\\\r\n                                    ' + value + '\\\r\n                                </span>';\r\n                    }\r\n                }, {\r\n                    title: 'Тип', name: 'TaskType', data: 'TaskType'\r\n                }\r\n            ]\r\n        };\r\n  \r\n        mainGrid = $table.dataTable(gridParameters);\r\n    }\r\n\r\n    function processGridFilter(filter) {\r\n        processFilterHash(filter);\r\n    }\r\n\r\n    function processFilterHash(filter) {\r\n        if (filter.hash) {\r\n            baseApiUrl = '/api/tasks/' + filter.hash\r\n                .replace('sysdatetime', 'DateTime\\'' + (new Date()).toISOString() + '\\'')\r\n                .replace('sysdate', 'DateTime\\'' + (new Date()).toISOString().substr(0, 10) + '\\'');\r\n        } else {\r\n            baseApiUrl = '/api/tasks/';\r\n        }\r\n    }\r\n\r\n    function parseDate(date, format) {\r\n        if (date) {\r\n            return $.format.date(date, (format || defaultDateFotmat));\r\n        }\r\n        return null;\r\n    }\r\n\r\n    function setTasksGridFilter(filterObject) {\r\n        gridFilter = filterObject;\r\n    }\r\n\r\n    function refreshTasksGrid(url) {\r\n        if (typeof url !== 'undefined') {\r\n            //mainGrid.ajax.url(url).load();\r\n            mainGrid.fnSettings().sAjaxSource = url;\r\n            mainGrid.fnDraw();\r\n        } else {\r\n            mainGrid.fnDraw();//.ajax.reload();\r\n        }\r\n    }\r\n\r\n    function loadTasks(filter) {\r\n        setTasksGridFilter(filter);\r\n        processGridFilter(filter);\r\n        refreshTasksGrid(utils.urlContent(baseApiUrl));\r\n    }\r\n\r\n    $(function () {\r\n        init();\r\n    });\r\n\r\n    return {\r\n        init: init,\r\n        setTasksGridFilter: setTasksGridFilter,\r\n        refreshTasksGrid: refreshTasksGrid,\r\n        loadTasks: loadTasks\r\n    };\r\n}(window, jQuery, app, app.utils, dataBinder, app.components.tasks.services.tasksService));\r\n\r\n"]}